var container=document.getElementsByClassName("adress-container")[0],popUpContainer=document.getElementsByClassName("pop-up-container")[0],popUpContainerInner=document.getElementsByClassName("pop-up-container-inner")[0],highLightCounter=-1,resultHeader=document.getElementsByName("result-header")[0],popUpIndex,overlay=document.getElementsByClassName("overlay")[0],row=document.createElement("div");row.className="gtr-row";var studArr=[],xmlhttp=new XMLHttpRequest,url="js/students.JSON",imagePath="images/student-faces/";xmlhttp.onreadystatechange=function(){function e(){for(var e=0;e<h.length;e++)h[e]==this&&(popUpIndex=e,i())}function n(){""!=document.getElementsByTagName("input")[0].value?(overlay.style.display="block",overlay.style.opacity=1):(overlay.style.opacity=0,overlay.style.display="none")}function t(){function e(){for(var e=0,n=d.length;n>e;e++)if(d[e].innerHTML==this.innerHTML){d[e].className="search-result search-result-active",highLightCounter=e;for(var t in o)d[e].innerHTML.includes(o[t].phoneNumber)&&(popUpIndex=t);document.getElementsByClassName("search-result-active")[0].addEventListener("click",i)}}function n(){for(var e=0;e<d.length;e++)d[e].className="search-result"}highLightCounter=-1;var t="träffar",a=[],r=document.getElementsByClassName("input")[0].value;g.innerHTML="";var s=0;r=r.toLowerCase();for(var l=0;l<studArr.length;l++)studArr[l].indexOf(r)>=0&&""!=r&&a.push(l);1==a.length&&(t="träff");for(var p=0;p<a.length;p++){var c=document.createElement("div");c.className="search-result",c.innerHTML=o[a[p]].firstName+" "+o[a[p]].lastName+"<br>",c.innerHTML+=o[a[p]].address+"<br>",c.innerHTML+=o[a[p]].postalNumber+"<br>",c.innerHTML+=o[a[p]].city+"<br>",c.innerHTML+=o[a[p]].phoneNumber+"<br>",c.innerHTML+=o[a[p]].mail+"<br>",s++,g.appendChild(c)}v.innerHTML="Din sökning på <span class='underline'>"+f.value+"</span> gav "+s+" "+t+".";for(var d=document.getElementsByClassName("search-result"),m="<span class='highlight'>",u="</span>",h=new RegExp(r,"g"),y=0;y<d.length;y++)"br"!=r&&"b"!=r&&"r"!=r&&(d[y].innerHTML=d[y].innerHTML.toLowerCase().replace(h,m+r+u)),d[y].addEventListener("mouseover",e),d[y].addEventListener("mouseleave",n)}function a(e){var n=N.length;if("38"==e.keyCode)highLightCounter>0&&highLightCounter--;else if("40"==e.keyCode)n-1>highLightCounter&&highLightCounter++;else if("13"==e.keyCode&&(overlay.style.display="none","block"!=popUpContainer.style.display)){var t=document.getElementsByClassName("search-result-active")[0];for(var a in o)t.innerHTML.includes(o[a].phoneNumber)&&(popUpIndex=a);i()}r()}function r(){for(var e=0;e<N.length;e++)N[e].className="search-result";N[highLightCounter].className="search-result search-result-active"}function i(){var e=document.createElement("div");e.className="pop-up-address-container";var n=document.createElement("div");n.className="pop-up-face-container",n.style.backgroundImage="url(images/students/"+o[popUpIndex].face+")",e.innerHTML="<i class='icon flaticon-id17'></i>"+o[popUpIndex].firstName+" ",e.innerHTML+=o[popUpIndex].lastName+"<br> ",e.innerHTML+="<i class='icon flaticon-pin71'></i>"+o[popUpIndex].address+"<br> ",e.innerHTML+="<i class='icon placeholder-icon flaticon-pin71'></i>"+o[popUpIndex].postalNumber+"<br> ",e.innerHTML+="<i class='icon placeholder-icon flaticon-pin71'></i>"+o[popUpIndex].city+"<br> ",e.innerHTML+="<i class='icon flaticon-iphone26'></i>"+o[popUpIndex].phoneNumber+"<br> ",e.innerHTML+="<i class='icon flaticon-email5'></i><a href='mailto:"+o[popUpIndex].mail+"'>"+o[popUpIndex].mail+"</a><br> ";var t=document.createElement("p");t.innerHTML="<span class='important-text'>"+o[popUpIndex].firstName+" "+o[popUpIndex].lastName+":</span> "+o[popUpIndex].quote,popUpContainerInner.appendChild(n),popUpContainerInner.appendChild(e),popUpContainerInner.appendChild(t),setTimeout(function(){popUpContainerInner.style.opacity=1},20),popUpContainer.style.display="block",setTimeout(function(){popUpContainer.style.opacity=1},20)}function s(){document.getElementsByTagName("input")[0].value="",overlay.style.opacity=0,overlay.style.display="none",setTimeout(function(){},100),document.getElementsByClassName("search-result-container")[0].innerHTML="",v.innerHTML="&nbsp;"}if(4==xmlhttp.readyState&&200==xmlhttp.status){var o=JSON.parse(xmlhttp.responseText);for(var l in o){var p=document.createElement("div");p.className="gtr col-3-desk col-4-tab col-6-ml col-12-ms";var c=document.createElement("div");c.className="card-container";var d=document.createElement("div");d.className="face-container",d.style.backgroundImage="url(images/students/"+o[l].face+")";var m=document.createElement("div");m.className="adress-text-container",m.innerHTML="<i class='icon flaticon-id17'></i>"+o[l].firstName+" ",m.innerHTML+=o[l].lastName+"<br> ",m.innerHTML+="<i class='icon flaticon-pin71'></i>"+o[l].city+"<br> ",m.innerHTML+="<i class='icon flaticon-iphone26'></i>"+o[l].phoneNumber+"<br> ",m.innerHTML+="<i class='icon flaticon-email5'></i><a href='mailto:"+o[l].mail+"'>"+o[l].mail+"</a><br> ",m.innerHTML+="<div class='all-info-link'>Fullständig information</div>",c.appendChild(d),c.appendChild(m),p.appendChild(c),row.appendChild(p),studArr.push(o[l].firstName+" "+o[l].lastName+o[l].address+o[l].postalNumber+o[l].city+o[l].phoneNumber)}for(var u=0;u<studArr.length;u++)studArr[u]=studArr[u].toLowerCase();for(var h=document.getElementsByClassName("all-info-link"),y=0;y<h.length;y++)h[y].addEventListener("click",e);var g=document.getElementsByClassName("search-result-container")[0],v=document.getElementsByTagName("h3")[0],f=document.getElementsByClassName("input")[0];f.addEventListener("input",n),f.addEventListener("input",t);var N=document.getElementsByClassName("search-result");document.onkeydown=a,document.getElementsByClassName("close-pop-up")[0].addEventListener("click",function(){overlay.style.display="none",setTimeout(function(){popUpContainer.style.opacity=0},20),setTimeout(function(){popUpContainer.style.display="none",popUpContainerInner.innerHTML=""},400)}),document.getElementsByTagName("body")[0].addEventListener("click",s)}},xmlhttp.open("GET",url,!0),xmlhttp.send(),container.appendChild(row);